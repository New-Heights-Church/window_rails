<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang='en'>
  <head>
    <title>File: tooltip.js [RDoc Documentation]</title>
    <meta content='text/html; charset=UTF-8' http-equiv='Content-Type'>
    <link href='../../../rdoc-style.css' media='screen' rel='stylesheet' type='text/css'>
    <script type='text/javascript'>
      //<![CDATA[
        function popupCode(url) {
          window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
        }
        
        function toggleCode(id) {
          var code = document.getElementById(id)
        
          code.style.display = code.style.display != 'block' ? 'block' : 'none'
          return true
        }
        
        // Make codeblocks hidden by default
        document.writeln('<' + 'style type="text/css">.method .source pre { display: none }<\/style>')
      //]]>
    </script>
  </head>
  <body class='page'>
    <div class='file' id='wrapper'>
      <div class='header'>
        <h1 class='name'>tooltip.js</h1>
        <div class='paths'>
          files/javascripts/tooltip.js
        </div>
        <div class='last-update'>
          Last Update:
          <span class='datetime'>Mon Jan 24 10:47:09 -0800 2011</span>
        </div>
      </div>
      <div id='content'>
        <div id='text'>
          <div id='description'>
            <p>
            // Singleton class TooltipWindow // This class works with special
            className. The tooltip content could be in your HTML page as an hidden
            element or // can be retreive by an AJAX call. // // To work, You just need
            to set two class name on elements that should show tooltips // - One to say
            to TooltipManager that this element must have a tooltip
            (&#8216;tooltip&#8217; by default) // - Another to indicate how to find the
            tooltip content // It could be html_XXXX if tootltip content is somewhere
            hidden in your page, XXX must be DOM ID of this hidden element // It could
            be ajax_XXXX if tootltip content must be find by an ajax request, XXX will
            be the string send as id parameter to your server. // Check
            samples/tooltips/tooltip.html to see how it works // TooltipManager = {
            </p>
            <pre>options: {cssClassName: 'tooltip', delayOver: 200, delayOut: 1000, shiftX: 10, shiftY: 10,&#x000A;          className: 'alphacube', width: 200, height: null,&#x000A;          draggable: false, minimizable: false, maximizable: false, showEffect: Element.show, hideEffect: Element.hide},&#x000A;ajaxInfo: null,&#x000A;elements: null,&#x000A;showTimer: null,&#x000A;hideTimer: null,&#x000A;&#x000A;// Init tooltip manager&#x000A;// parameters:&#x000A;// - cssClassName (string) : CSS class name where tooltip should be shown.&#x000A;// - ajaxOptions  (hash)   : Ajax options for ajax tooltip.&#x000A;//                           For examples {url: &quot;/tooltip/get.php&quot;, options: {method: 'get'}}&#x000A;//                           see Ajax.Request documentation for details&#x000A;//- tooltipOptions (hash)  : available keys&#x000A;//                           - delayOver: int in ms (default 10) delay before showing tooltip&#x000A;//                           - delayOut:  int in ms (default 1000) delay before hidding tooltip&#x000A;//                           - shiftX:    int in pixels (default 10) left shift of the tooltip window&#x000A;//                           - shiftY:    int in pixels (default 10) top shift of the tooltip window&#x000A;//                           and All window options like showEffect: Element.show, hideEffect: Element.hide to remove animation&#x000A;//                           default: {className: 'alphacube', width: 200, height: null, draggable: false, minimizable: false, maximizable: false}&#x000A;&#x000A;init: function(cssClassName, ajaxInfo, tooltipOptions) {&#x000A;  TooltipManager.options = Object.extend(TooltipManager.options, tooltipOptions || {});&#x000A;&#x000A;  cssClassName = TooltipManager.options.cssClassName || &quot;tooltip&quot;;&#x000A;  TooltipManager.ajaxInfo = ajaxInfo;&#x000A;  TooltipManager.elements = $$(&quot;.&quot; + cssClassName);&#x000A;  TooltipManager.elements.each(function(element) {&#x000A;    element = $(element)&#x000A;    var info = TooltipManager._getInfo(element);&#x000A;    if (info.ajax) {&#x000A;      element.ajaxId = info.id;&#x000A;      element.ajaxInfo = ajaxInfo;&#x000A;    }&#x000A;    else {&#x000A;      element.tooltipElement = $(info.id);&#x000A;    }&#x000A;    element.observe(&quot;mouseover&quot;, TooltipManager._mouseOver);&#x000A;    element.observe(&quot;mouseout&quot;, TooltipManager._mouseOut);&#x000A;  });&#x000A;  Windows.addObserver(this);&#x000A;},&#x000A;&#x000A;addHTML: function(element, tooltipElement) {&#x000A;  element = $(element);&#x000A;  tooltipElement = $(tooltipElement);&#x000A;  element.tooltipElement = tooltipElement;&#x000A;&#x000A;  element.observe(&quot;mouseover&quot;, TooltipManager._mouseOver);&#x000A;  element.observe(&quot;mouseout&quot;, TooltipManager._mouseOut);&#x000A;},&#x000A;&#x000A;addAjax: function(element, ajaxInfo) {&#x000A;  element = $(element);&#x000A;  element.ajaxInfo = ajaxInfo;&#x000A;  element.observe(&quot;mouseover&quot;, TooltipManager._mouseOver);&#x000A;  element.observe(&quot;mouseout&quot;, TooltipManager._mouseOut);&#x000A;},&#x000A;&#x000A;addURL: function(element, url, width, height) {&#x000A;  element = $(element);&#x000A;  element.url = url;&#x000A;  element.frameWidth = width;&#x000A;  element.frameHeight = height;&#x000A;  element.observe(&quot;mouseover&quot;, TooltipManager._mouseOver);&#x000A;  element.observe(&quot;mouseout&quot;, TooltipManager._mouseOut);&#x000A;},&#x000A;&#x000A;close: function() {&#x000A;  if (TooltipManager.tooltipWindow)&#x000A;    TooltipManager.tooltipWindow.hide();&#x000A;},&#x000A;&#x000A;preloadImages: function(path, images, extension) {&#x000A;  if (!extension)&#x000A;    extension = &quot;.gif&quot;;&#x000A;&#x000A;  //preload images&#x000A;  $A(images).each(function(i) {&#x000A;    var image = new Image();&#x000A;    image.src= path + &quot;/&quot; + i + extension;&#x000A;  });&#x000A;},&#x000A;&#x000A;_showTooltip: function(element) {&#x000A;  if (this.element == element)&#x000A;    return;&#x000A;  // Get original element&#x000A;  while (element &amp;&amp; (!element.tooltipElement &amp;&amp; !element.ajaxInfo &amp;&amp; !element.url))&#x000A;    element = element.parentNode;&#x000A;  this.element = element;&#x000A;&#x000A;  TooltipManager.showTimer = null;&#x000A;  if (TooltipManager.hideTimer)&#x000A;    clearTimeout(TooltipManager.hideTimer);&#x000A;&#x000A;  var position = Position.cumulativeOffset(element);&#x000A;  var dimension = element.getDimensions();&#x000A;&#x000A;  if (! this.tooltipWindow)&#x000A;    this.tooltipWindow = new Window(&quot;__tooltip__&quot;, TooltipManager.options);&#x000A;&#x000A;  this.tooltipWindow.hide();&#x000A;  this.tooltipWindow.setLocation(position[1] + dimension.height + TooltipManager.options.shiftY, position[0] + TooltipManager.options.shiftX);&#x000A;&#x000A;  Event.observe(this.tooltipWindow.element, &quot;mouseover&quot;, function(event) {TooltipManager._tooltipOver(event, element)});&#x000A;  Event.observe(this.tooltipWindow.element, &quot;mouseout&quot;, function(event) {TooltipManager._tooltipOut(event, element)});&#x000A;&#x000A;  // Reset width/height for computation&#x000A;  this.tooltipWindow.height = TooltipManager.options.height;&#x000A;  this.tooltipWindow.width = TooltipManager.options.width;&#x000A;&#x000A;  // Ajax content&#x000A;  if (element.ajaxInfo) {&#x000A;    var p = element.ajaxInfo.options.parameters;&#x000A;    var saveParam = p;&#x000A;&#x000A;    // Set by CSS&#x000A;    if (element.ajaxId) {&#x000A;      if (p)&#x000A;        p += &quot;&amp;id=&quot; + element.ajaxId;&#x000A;      else&#x000A;        p = &quot;id=&quot; + element.ajaxId;&#x000A;    }&#x000A;    element.ajaxInfo.options.parameters = p || &quot;&quot;;&#x000A;    this.tooltipWindow.setHTMLContent(&quot;&quot;);&#x000A;    this.tooltipWindow.setAjaxContent(element.ajaxInfo.url, element.ajaxInfo.options);&#x000A;    element.ajaxInfo.options.parameters = saveParam;&#x000A;  }&#x000A;  // URL content&#x000A;  else if (element.url) {&#x000A;    this.tooltipWindow.setURL(element.url);&#x000A;    this.tooltipWindow.setSize(element.frameWidth, element.frameHeight);&#x000A;&#x000A;    // Set tooltip size&#x000A;    this.tooltipWindow.height = element.frameHeight;&#x000A;    this.tooltipWindow.width = element.frameWidth;&#x000A;  }&#x000A;  // HTML content&#x000A;  else&#x000A;    this.tooltipWindow.setHTMLContent(element.tooltipElement.innerHTML);&#x000A;&#x000A;  if (!element.ajaxInfo) {&#x000A;    this.tooltipWindow.show();&#x000A;    this.tooltipWindow.toFront();&#x000A;  }&#x000A;},&#x000A;&#x000A;_hideTooltip: function(element) {&#x000A;  if (this.tooltipWindow) {&#x000A;    this.tooltipWindow.hide();&#x000A;    this.element = null;&#x000A;  }&#x000A;},&#x000A;&#x000A;_mouseOver: function (event) {&#x000A;  var element = Event.element(event);&#x000A;  if (TooltipManager.showTimer)&#x000A;    clearTimeout(TooltipManager.showTimer);&#x000A;&#x000A;  TooltipManager.showTimer = setTimeout(function() {TooltipManager._showTooltip(element)}, TooltipManager.options.delayOver)&#x000A;},&#x000A;&#x000A;_mouseOut: function(event) {&#x000A;  var element = Event.element(event);&#x000A;  if (TooltipManager.showTimer) {&#x000A;    clearTimeout(TooltipManager.showTimer);&#x000A;    TooltipManager.showTimer = null;&#x000A;    return;&#x000A;  }&#x000A;  if (TooltipManager.tooltipWindow)&#x000A;    TooltipManager.hideTimer = setTimeout(function() {TooltipManager._hideTooltip(element)}, TooltipManager.options.delayOut)&#x000A;},&#x000A;&#x000A;_tooltipOver: function(event, element) {&#x000A;  if (TooltipManager.hideTimer) {&#x000A;    clearTimeout(TooltipManager.hideTimer);&#x000A;    TooltipManager.hideTimer = null;&#x000A;  }&#x000A;},&#x000A;&#x000A;_tooltipOut: function(event, element) {&#x000A;  if (TooltipManager.hideTimer == null)&#x000A;    TooltipManager.hideTimer = setTimeout(function() {TooltipManager._hideTooltip(element)}, TooltipManager.options.delayOut)&#x000A;},&#x000A;&#x000A;_getInfo: function(element) {&#x000A;  // Find html_ for static content&#x000A;  var id = element.className.split(' ').detect(function(name) {return name.indexOf(&quot;html_&quot;) == 0});&#x000A;  var ajax = true;&#x000A;  if (id)&#x000A;    ajax = false;&#x000A;  else&#x000A;    // Find ajax_ for ajax content&#x000A;    id = element.className.split(' ').detect(function(name) {return name.indexOf(&quot;ajax_&quot;) == 0});&#x000A;&#x000A;  id = id.substr(id.indexOf('_')+1, id.length)&#x000A;  return id ? {ajax: ajax, id: id} : null;&#x000A;},&#x000A;&#x000A;onBeforeShow: function(eventName, win) {&#x000A;   var top = parseFloat(win.getLocation().top);&#x000A;   var dim = win.element.getDimensions();&#x000A;&#x000A;   if (top + dim.height &gt; TooltipManager._getScrollTop() + TooltipManager._getPageHeight()) {&#x000A;     var position = Position.cumulativeOffset(this.element);&#x000A;&#x000A;     var top = position[1] - TooltipManager.options.shiftY - dim.height;&#x000A;     win.setLocation(top, position[0] + TooltipManager.options.shiftX)&#x000A;   }&#x000A; },&#x000A;&#x000A;      _getPageWidth: function(){&#x000A;              return window.innerWidth || document.documentElement.clientWidth || 0;&#x000A;      },&#x000A;&#x000A;      _getPageHeight: function(){&#x000A;              return window.innerHeight || document.documentElement.clientHeight || 0;&#x000A;      },&#x000A;&#x000A;      _getScrollTop: function(){&#x000A;              return document.documentElement.scrollTop || window.pageYOffset || 0;&#x000A;      },&#x000A;&#x000A;      _getScrollLeft: function(){&#x000A;              return document.documentElement.scrollLeft || window.pageXOffset || 0;&#x000A;      }</pre>
            <p>
            };
            </p>
          </div>
          <div id='section'>
          </div>
        </div>
      </div>
      <div id='footer-push'></div>
    </div>
    <div id='footer'>
      <a href="http://github.com/mislav/hanna/tree/master"><strong>Hanna</strong> RDoc template</a>
    </div>
  </body>
</html>
